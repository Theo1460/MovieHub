(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{1270:function(e,t,a){Promise.resolve().then(a.bind(a,2962))},2962:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(7437),s=a(2265),i=a(9820),n=a(279),o=a(2381),l=a(8997),c=a(3247),d=a(7168),u=a(3145),f=a(6410),m=a(5369),p=a(3448),g=a(653);let v=m.fC;m.xz;let h=m.h_;m.x8;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.aV,{ref:t,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});x.displayName=m.aV.displayName;let b=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{}),(0,r.jsxs)(m.VY,{ref:t,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[s,(0,r.jsxs)(m.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(g.Pxu,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});b.displayName=m.VY.displayName;let y=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};y.displayName="DialogHeader";let w=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};w.displayName="DialogFooter";let j=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.Dx,{ref:t,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});j.displayName=m.Dx.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.dk,{ref:t,className:(0,p.cn)("text-sm text-muted-foreground",a),...s})}).displayName=m.dk.displayName;var N=a(9376);let _="ca033664d69e46239a2fefbbcd663c4d".replace(/'/g,"&#39;");async function k(e){let t=e?"https://api.themoviedb.org/3/discover/movie?api_key=".concat(_,"&with_genres=").concat(e):"https://api.themoviedb.org/3/movie/popular?api_key=".concat(_);try{let e=await fetch(t);return(await e.json()).results.map(e=>({id:e.id,title:e.title,overview:e.overview,image:e.poster_path?"https://image.tmdb.org/t/p/w400".concat(e.poster_path):"",vote_average:e.vote_average,vote_count:e.vote_count}))}catch(e){return console.error("Error fetching popular movies:",e),[]}}async function C(e){let t="https://api.themoviedb.org/3/search/movie?api_key=".concat(_,"&query=").concat(encodeURIComponent(e));try{let e=await fetch(t);return(await e.json()).results.map(e=>({id:e.id,title:e.title,overview:e.overview,image:e.poster_path?"https://image.tmdb.org/t/p/w400".concat(e.poster_path):"",vote_average:e.vote_average,vote_count:e.vote_count}))}catch(e){return console.error("Error searching movies:",e),[]}}async function z(){try{let e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(_));return(await e.json()).genres}catch(e){return console.error("Error fetching genres:",e),[]}}let R=async e=>await Promise.all(e.map(async e=>{let t=await fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(_)),a=await t.json();return{id:a.id,title:a.title,overview:a.overview,image:a.poster_path?"https://image.tmdb.org/t/p/w400".concat(a.poster_path):"",vote_average:a.vote_average,vote_count:a.vote_count,poster_path:a.poster_path}}));function S(){let[e,t]=(0,s.useState)(""),[a,m]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[_,S]=(0,s.useState)(null),[I,V]=(0,s.useState)(null),[E,A]=(0,s.useState)([]),[U,F]=(0,s.useState)(!1),Q=(0,N.useRouter)();(0,s.useEffect)(()=>{(async function(){x(await z())})()},[]),(0,s.useEffect)(()=>{(async function(){m(await k(_||void 0))})()},[_]);let T=async e=>{let t=await (0,f.QT)((0,f.JU)(f.db,"favorites",e));if(t.exists()){let e=t.data().favorites||[];g(e),A(await R(e))}},Y=async(e,t)=>{let a=(0,f.JU)(f.db,"favorites",e),r=await (0,f.QT)(a);if(r.exists()){let e=r.data().favorites||[];e.includes(t)||(e.push(t),await (0,f.pl)(a,{favorites:e},{merge:!0}))}else await (0,f.pl)(a,{favorites:[t]})},D=async(e,t)=>{let a=(0,f.JU)(f.db,"favorites",e),r=await (0,f.QT)(a);if(r.exists()){let e=(r.data().favorites||[]).filter(e=>e!==t);await (0,f.pl)(a,{favorites:e},{merge:!0})}};(0,s.useEffect)(()=>{let e=(0,f.Aj)(f.I8,e=>{e?(V(e),T(e.uid)):(V(null),g([]))});return()=>e()},[]);let J=async()=>{e?m(await C(e)):m(await k(_||void 0))},P=e=>{I?p.includes(e)?D(I.uid,e):Y(I.uid,e):F(!0),g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),A(t=>t.some(t=>t.id===e)?t.filter(t=>t.id!==e):[...t,a.find(t=>t.id===e)])},O=e=>{let{movie:t,isFavorite:a}=e;return(0,r.jsxs)(i.Zb,{className:"w-full rounded-[2rem] overflow-hidden shadow-lg group relative",children:[(0,r.jsx)(i.aY,{className:"p-0",children:(0,r.jsxs)("div",{className:"relative aspect-square",children:[(0,r.jsx)(u.default,{src:t.image,alt:t.title,width:400,height:600,className:"object-cover rounded-[2rem]",priority:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-80 transition-opacity rounded-[2rem] flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"text-white text-center",children:[(0,r.jsx)("p",{className:"text-sm md:text-base mb-2",children:t.overview}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsxs)("p",{className:"text-lg font-semibold",children:[t.vote_average,"/10"]})}),(0,r.jsxs)("p",{className:"text-sm",children:[t.vote_count," reviews"]})]})}),(0,r.jsxs)(o.z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 w-10 h-10 rounded-full bg-background/50 hover:bg-background/75 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>P(t.id),children:[(0,r.jsx)(l.Z,{className:"w-6 h-6 ".concat(a?"fill-red-500 text-red-500":"text-white")}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle favorite"})]})]})}),(0,r.jsx)(i.eW,{className:"p-4",children:(0,r.jsx)("h3",{className:"font-medium text-base text-center w-full text-foreground",children:t.title})})]},t.id)};return(0,r.jsxs)("div",{className:"bg-background min-h-screen p-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-8 text-primary",children:"Popular Movies"}),(0,r.jsxs)("div",{className:"flex items-center mb-8",children:[(0,r.jsx)(n.I,{type:"search",placeholder:"Search movies...",className:"max-w-md text-black bg-white",value:e,onChange:e=>t(e.target.value)}),(0,r.jsxs)(o.z,{onClick:J,className:"ml-2 bg-black text-white hover:bg-gray-800",variant:"ghost",size:"icon",children:[(0,r.jsx)(c.Z,{className:"w-6 h-6"}),(0,r.jsx)("span",{className:"sr-only",children:"Search"})]})]}),(0,r.jsx)("div",{className:"flex mb-8",children:(0,r.jsxs)("select",{value:_||"",onChange:e=>S(Number(e.target.value)),className:"bg-white text-black p-2 rounded-md",children:[(0,r.jsx)("option",{value:"",children:"All Genres"}),h.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,r.jsxs)(d.mQ,{defaultValue:"all",className:"mb-8",children:[(0,r.jsxs)(d.dr,{children:[(0,r.jsx)(d.SP,{value:"all",children:"All Movies"}),(0,r.jsx)(d.SP,{value:"favorites",children:"Favorites"})]}),(0,r.jsx)(d.nU,{value:"all",children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:a.map(e=>(0,r.jsx)(O,{movie:e,isFavorite:p.includes(e.id)},e.id))})}),(0,r.jsx)(d.nU,{value:"favorites",children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:E.length>0?E.map(e=>(0,r.jsx)(O,{movie:e,isFavorite:!0},e.id)):(0,r.jsx)("p",{children:"No favorite movies found."})})})]}),(0,r.jsx)(v,{open:U,onOpenChange:F,children:(0,r.jsxs)(b,{children:[(0,r.jsx)(y,{children:(0,r.jsx)(j,{children:"Connexion requise"})}),(0,r.jsx)("p",{children:"Vous devez \xeatre connect\xe9 pour ajouter des films \xe0 vos favoris."}),(0,r.jsx)(w,{children:(0,r.jsx)(o.z,{onClick:()=>{Q.push("/auth")},className:"bg-black text-white hover:bg-gray-800",children:"Se connecter"})})]})})]})}},2381:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var r=a(7437),s=a(2265),i=a(7053),n=a(7712),o=a(3448);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:s,size:n,className:a})),ref:t,...d})});c.displayName="Button"},9820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return o},Zb:function(){return n},aY:function(){return c},eW:function(){return d},ll:function(){return l}});var r=a(7437),s=a(2265),i=a(3448);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",a),...s})});l.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})});d.displayName="CardFooter"},279:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var r=a(7437),s=a(2265),i=a(3448);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},7168:function(e,t,a){"use strict";a.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return o},nU:function(){return d}});var r=a(7437),s=a(2265),i=a(9833),n=a(3448);let o=i.fC,l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.aV,{ref:t,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...s})});l.displayName=i.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...s})});c.displayName=i.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});d.displayName=i.VY.displayName},6410:function(e,t,a){"use strict";a.d(t,{Aj:function(){return i.Aj},I8:function(){return l},JU:function(){return n.JU},QT:function(){return n.QT},db:function(){return c},pl:function(){return n.pl}});var r=a(738),s=a(62),i=a(4752),n=a(5978);let o=(0,r.ZF)({apiKey:"AIzaSyB-TxKbw3OgJiM7AaCuhF3S3jc7eD8yYzA",authDomain:"moviehub-25b57.firebaseapp.com",projectId:"moviehub-25b57",storageBucket:"moviehub-25b57.firebasestorage.app",messagingSenderId:"485341819524",appId:"1:485341819524:web:5481b8df1da67a903388d1",measurementId:"G-GCXQJ2Y9EB"}),l=(0,i.v0)(o),c=(0,n.ad)(o);(0,s.cF)(o)},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var r=a(1994),s=a(3335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[358,400,310,628,621,145,581,971,117,744],function(){return e(e.s=1270)}),_N_E=e.O()}]);